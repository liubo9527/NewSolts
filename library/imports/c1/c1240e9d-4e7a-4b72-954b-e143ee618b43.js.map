{"version":3,"sources":["../../../../../assets/Script/network/assets/Script/network/SdkData.js"],"names":["NetData","require","DataOper","Common","SdkData","cc","Class","statics","g_SdkDataInst","getInst","register","destoryInst","CC_JSB","document","addEventListener","debug","e","balance","data","fee","error","type","updateUserInfo","window","aliLotteryCasinoSDK","recharge","flag","orderMore","arr","gameToken","split","instanceId","redirectOrder","exitGame","popWindow","setCache","key","value","sys","localStorage","setItem","getCache","callback","result","getItem","module","exports"],"mappings":"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","file":"SdkData.js","sourceRoot":"../../../../../assets/Script/network","sourcesContent":["var NetData = require(\"NetData\");\nvar DataOper = require(\"DataOper\");\nvar Common = require(\"Common\");\n\nvar SdkData = cc.Class({\n    statics : {\n        g_SdkDataInst : null,\n\n        getInst : function(){\n            if(SdkData.g_SdkDataInst == null){\n                SdkData.g_SdkDataInst = new SdkData();\n                SdkData.g_SdkDataInst.register();\n            }\n\n            return SdkData.g_SdkDataInst;\n        },\n\n        destoryInst  :function(){\n            if(SdkData.g_SdkDataInst !== null){\n                SdkData.g_SdkDataInst = null;\n            }\n        }\n    },\n\n        //注册监听\n        register : function(){\n            if (!CC_JSB){\n                //系统退出事件\n                document.addEventListener('casino:back', function() {\n                    Common.Common.getInst().debug(\"SdkData_register_casino:back\");\n                    \n                }, false);\n                \n                //窗口激活事件，当 App 从后台切回到前台时会触发\n                document.addEventListener('casino:resume', function(e) {\n                    \n                }, false);\n\n                //余额更新事件\n                document.addEventListener('casino:updateUserBalance', function(e) {\n                    if(e){\n                        NetData.NetData.getInst().balance = e.data.fee;\n                    }\n                }, false);\n\n                //余额更新事件\n                document.addEventListener('casino:updateUserBalanceError', function() {\n                    NetData.NetData.getInst().error = true;\n                }, false);\n\n                //\n                document.addEventListener('casino:click', function(e) {\n                    switch (e.data.type) {\n                        case 'order':\n                        // 我的订单\n\n                        break;\n                        case 'rule':\n                        // 游戏规则\n\n                        break;\n                        }\n                    }, false);\n            }\n        },\n\n        //更新用户信息\n        updateUserInfo : function(){\n            if (!CC_JSB){\n                if (window.aliLotteryCasinoSDK) {\n                    window.aliLotteryCasinoSDK.updateUserInfo();\n                }\n            }\n        },\n\n        //充值\n        //@param flag 是否提示余额不足\n        recharge : function(flag){\n            if (!CC_JSB){\n                if (window.aliLotteryCasinoSDK) {\n                    window.aliLotteryCasinoSDK.recharge(flag);\n                }\n            }\n        },\n\n        //更多订单\n        orderMore : function(){\n            if (!CC_JSB){\n                if (window.aliLotteryCasinoSDK) {\n                    var arr = DataOper.DataOper.getInst().gameToken.split(\"-\");\n                    var instanceId = arr[2];\n                    window.aliLotteryCasinoSDK.redirectOrder(instanceId);\n                }\n            }\n        },\n\n        //退出游戏\n        exitGame : function(){\n            if (!CC_JSB){\n                if (window.aliLotteryCasinoSDK) {\n                    window.aliLotteryCasinoSDK.popWindow();\n                }\n            }\n        },\n\n        setCache  : function(key, value){\n            if (!CC_JSB && window.aliLotteryCasinoSDK) {\n                window.aliLotteryCasinoSDK.setCache(key, value);\n            }\n            else{\n                cc.sys.localStorage.setItem(key, value);\n            }\n        },\n\n        getCache : function(key, callback){\n            if (!CC_JSB && window.aliLotteryCasinoSDK) {\n                window.aliLotteryCasinoSDK.getCache(key, callback);\n            }\n            else{\n                var result = cc.sys.localStorage.getItem(key);\n                callback(result);\n            }\n        }\n\n\n});\n\nmodule.exports = SdkData;\n"]}