{"version":3,"sources":["Common.js"],"names":["KeyValue","cc","Class","properties","key","value","CusMap","maps","default","type","serializable","set","s_key","toString","flag","i","length","keyValue","push","get","Common","statics","g_CommonInst","getInst","init","destoryInst","resMap","nickMap","setNick","id","nick","getNick","j","callback","CC_JSB","window","aliLotteryCasinoSDK","self","getAvatar","obj","setTexture","texture","getTexture","setNoTouch","noTouchLayer","find","active","showToast","content","toast","getComponent","show","showDialog","dialogTag","callNode","callFunc","btnL","btnR","dialog","reconnecting","loading","log","msg","console","debug","module","exports"],"mappings":"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","file":"Common.js","sourceRoot":"../../../../assets/Script","sourcesContent":["\nvar KeyValue = cc.Class({\n    properties: {\n        key : \"\",\n        value : \"\"\n    }\n});\n\nvar CusMap = cc.Class({\n    properties:{\n        maps : {\n            default : [],\n            type : [KeyValue],\n            serializable: false\n        }\n    },\n    \n    set : function(key, value){\n        var s_key = key.toString();\n        var flag = false;\n        \n        for(var i = 0; i < this.maps.length; ++i){\n            if(this.maps[i].key === s_key){\n                flag = true;\n                this.maps[i].value = value;\n                break;\n            }\n        }\n        \n        if(flag === false){\n            var keyValue = new KeyValue();\n            keyValue.key = s_key;\n            keyValue.value = value;\n            this.maps.push(keyValue);\n        }\n    },\n    \n    get : function(key){\n        var s_key = key.toString();\n        \n        for(var i = 0; i < this.maps.length; ++i){\n            if(this.maps[i].key === s_key){\n                return this.maps[i].value;\n            }\n        }\n        \n        return null;\n    }\n});\n\n\nvar Common = cc.Class({\n    statics : {\n        g_CommonInst : null,\n\n        getInst : function(){\n            if(Common.g_CommonInst === null){\n                Common.g_CommonInst = new Common();\n                Common.g_CommonInst.init();\n            }\n\n            return Common.g_CommonInst;\n        },\n\n        destoryInst  :function(){\n            if(Common.g_CommonInst !== null){\n                Common.g_CommonInst = null;\n            }\n        }\n    },\n\n    init : function(){\n        this.resMap = new CusMap();\n        this.nickMap = new CusMap();\n    },\n\n    setNick : function(id, nick){\n        this.nickMap.set(id, nick);\n    },\n\n    getNick : function(j,id, callback){\n        var nick =  this.nickMap.get(id);\n        if(nick != null){\n            callback(j,nick,id);\n        }\n        else{\n            if (!CC_JSB && window.aliLotteryCasinoSDK){\n                    var self = this;\n                    window.aliLotteryCasinoSDK.getAvatar(id, function(obj)\n                    {\n                        if(obj && obj[id]){\n                            self.setNick(id, obj[id].nick);\n                            callback(j,obj[id].nick,id);\n                        }\n                        else{\n                            callback(j,\"\",id);\n                        }\n                    });\n            }\n            else{\n                callback(j,id,id);\n            }\n        }\n    },\n\n    setTexture : function(key, texture){\n        this.resMap.set(key, texture);\n    },\n\n    getTexture : function(key){\n        return this.resMap.get(key);\n    },\n\n    setNoTouch : function(flag){\n        var noTouchLayer = cc.find(\"Canvas/noTouchLayer\");\n\n        if(flag){\n            noTouchLayer.active = true;\n        }\n        else{\n            noTouchLayer.active = false;\n        }\n    },\n    \n    showToast : function(content){\n        var toast = cc.find(\"Canvas/toast\").getComponent(\"Toast\");\n        toast.show(content);\n    },\n    \n    showDialog : function(dialogTag, callNode, callFunc, content, btnL, btnR){\n        var dialog = cc.find(\"Canvas/dialog\").getComponent(\"Dialog\");\n        dialog.show(dialogTag, callNode, callFunc, content, btnL, btnR);\n    },\n\n    reconnecting : function(flag, content){\n        var loading = cc.find(\"Canvas/loading\").getComponent(\"Loading\");\n        loading.reconnecting(flag, content);\n    },\n    \n    log : function(msg){\n        if (!CC_JSB && window.aliLotteryCasinoSDK) {\n            //window.aliLotteryCasinoSDK.log('debug', 'chest', 'info');\n            console.log(msg);\n        }\n        else{\n            console.log(msg);\n        }\n    },\n\n    debug : function(msg){\n        if (!CC_JSB && window.aliLotteryCasinoSDK) {\n            window.aliLotteryCasinoSDK.log('debug', 'OpenChest', msg);\n        }\n    }\n});\n\nmodule.exports = {\n    Common : Common,\n    KeyValue : KeyValue,\n    CusMap : CusMap\n};"]}